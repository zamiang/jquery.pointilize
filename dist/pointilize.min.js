/*! jQuery.pointilize - v0.1.0 - 2013-04-21
* http://zamiang.github.com/jquery.pointilize
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){(function(e,t,n){var r;return r=function(){function r(){}return r.prototype.mouse={x:-1,y:-1},r.prototype.cellSize=5,r.prototype.brushSize=2,r.prototype.incriment=4,r.prototype.initialize=function(e){if(!e)throw"You must pass options";if(!e.canvas||!(e.canvas.length=1))throw"You must pass canvas";if(!e.imgSrc)throw"You must pass imgSrc";return this.canvas=e.canvas,this.imgSrc=e.imgSrc,this.ctx=this.canvas.getContext("2d"),this.setDimensions(),this.createCanvas(this.docWidth,this.docHeight),this.createImage(this.docWidth,this.docHeight),e.interactive&&this.setupMouseEvents(),this},r.prototype.draw=function(){var e,t,n,r,i;r=this.cellSize,e=this.data.length,i=[];while(r<e){t=this.data[0].length,n=this.cellSize;while(r<t)this.drawCell(n,r,this.data[r][n],this.ctx),n+=this.cellSize;i.push(n+=this.cellSize)}return i},r.prototype.drawCell=function(e,t,n,r){if(n!==void 0)return r.fillStyle="rgb("+n[0]+", "+n[1]+", "+n[2]+")",r.fillRect(e,t,this.brushSize,this.brushSize)},r.prototype.drawPixelSquare=function(e,t,n,r){return this.drawCell(e,t,n,r),this.drawCell(e+1,t+1,n,r),this.drawCell(e,t+1,n,r),this.drawCell(e+1,t,n,r)},r.prototype.drawImageData=function(e,t,n,r){var i,s,o,u,a,f,l;n.drawImage(r,0,0,e,t),u=n.getImageData(0,0,e,t),f=u.data,l=0,i=0,s=[[]],o=0,a=f.length;while(o<a)s[l][i]=[f[o],f[o+1],f[o+2]],i>=e(-1)?(i=0,l++,s[l]=[]):i++,o+=this.incriment;return this.data=s,this.draw()},r.prototype.createCanvas=function(e,t){var r,i;return r=n.createElement("canvas"),r.width=e,r.height=t,i=r.getContext("2d")},r.prototype.createImage=function(e,t){var n,r=this;return n=new Image,n.onload=function(){return r.drawImageData(e,t,ctx,n)},n.src=this.imgSrc},r.prototype.setupMouseEvents=function(){var t=this;return e("body").mousemove(function(e){var n;return n=t.data[e.pageY][e.pageX],t.drawPixelSquare(e.pageX,e.pageY,n,t.ctx)})},r.prototype.setDimensions=function(){return this.docWidth=jQuery(t).width(),this.docHeight=Math.floor(this.docWidth*.75),this.canvas.setAttribute("height",this.docHeight),this.canvas.setAttribute("width",this.docWidth)},r}(),t.Pointilize=function(e){var t;return t=new r,t.initialize(e)}})(jQuery,window,document)}).call(this);