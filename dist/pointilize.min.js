/*! jQuery.pointilize - v0.1.0 - 2013-04-21
* http://zamiang.github.com/jquery.pointilize
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){var e;e=function(){function e(){}return e.prototype.mouse={x:-1,y:-1},e.prototype.cellSize=5,e.prototype.brushSize=2,e.prototype.incriment=4,e.prototype.initialize=function(e,t,n){n==null&&(n=!0);if(!e)return;if(!t)return;this.canvas=e,this.imgSrc=t,this.ctx=this.canvas.getContext("2d"),this.setDimensions(),this.createCanvas(this.docWidth,this.docHeight),this.createImage(this.docWidth,this.docHeight);if(n)return this.setupMouseEvents()},e.prototype.draw=function(){var e,t,n,r,i;r=this.cellSize,e=this.data.length,i=[];while(r<e){t=this.data[0].length,n=this.cellSize;while(r<t)this.drawCell(n,r,this.data[r][n],this.ctx),n+=this.cellSize;i.push(n+=this.cellSize)}return i},e.prototype.drawCell=function(e,t,n,r){if(n!==void 0)return r.fillStyle="rgb("+n[0]+", "+n[1]+", "+n[2]+")",r.fillRect(e,t,this.brushSize,this.brushSize)},e.prototype.drawPixelSquare=function(e,t,n,r){return this.drawCell(e,t,n,r),this.drawCell(e+1,t+1,n,r),this.drawCell(e,t+1,n,r),this.drawCell(e+1,t,n,r)},e.prototype.drawImageData=function(e,t,n,r){var i,s,o,u,a,f,l;n.drawImage(r,0,0,e,t),u=n.getImageData(0,0,e,t),f=u.data,l=0,i=0,s=[[]],o=0,a=f.length;while(o<a)s[l][i]=[f[o],f[o+1],f[o+2]],i>=e(-1)?(i=0,l++,s[l]=[]):i++,o+=this.incriment;return this.data=s,this.draw()},e.prototype.createCanvas=function(e,t){var n,r;return n=document.createElement("canvas"),n.width=e,n.height=t,r=n.getContext("2d")},e.prototype.createImage=function(e,t){var n,r=this;return n=new Image,n.onload=function(){return r.drawImageData(e,t,ctx,n)},n.src=this.imgSrc},e.prototype.setupMouseEvents=function(){var e=this;return $("body").mousemove(function(t){var n;return n=e.data[t.pageY][t.pageX],e.drawPixelSquare(t.pageX,t.pageY,n,e.ctx)})},e.prototype.setDimensions=function(){return this.docWidth=jQuery(window).width(),this.docHeight=Math.floor(this.docWidth*.75),this.canvas.setAttribute("height",this.docHeight),this.canvas.setAttribute("width",this.docWidth)},e}()}).call(this);