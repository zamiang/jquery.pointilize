/*! jQuery.pointilize - v0.1.0 - 2013-04-21
* http://zamiang.github.com/jquery.pointilize
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){(function(e,t,n){var r;return r=function(){function n(){}return n.prototype.mouse={x:-1,y:-1},n.prototype.cellSize=5,n.prototype.brushSize=2,n.prototype.incriment=4,n.prototype.initialize=function(e){if(!e)throw"You must pass options";if(!e.imgSrc)throw"You must pass imgSrc";return this.imgSrc=e.imgSrc,this.docWidth=jQuery(t).width(),this.docHeight=Math.floor(this.docWidth*.75),this.createCanvas(this.docWidth,this.docHeight),this.ctx=this.$el[0].getContext("2d"),this.setDimensions(),this.createImage(this.docWidth,this.docHeight),e.interactive&&this.setupMouseEvents(),this},n.prototype.draw=function(){var e,t,n,r,i;r=this.cellSize,e=this.data.length,i=[];while(r<e){t=this.data[0].length,n=this.cellSize;while(r<t)this.drawCell(n,r,this.data[r][n],this.ctx),n+=this.cellSize;i.push(n+=this.cellSize)}return i},n.prototype.drawCell=function(e,t,n,r){if(n!==void 0)return r.fillStyle="rgb("+n[0]+", "+n[1]+", "+n[2]+")",r.fillRect(e,t,this.brushSize,this.brushSize)},n.prototype.drawPixelSquare=function(e,t,n,r){return this.drawCell(e,t,n,r),this.drawCell(e+1,t+1,n,r),this.drawCell(e,t+1,n,r),this.drawCell(e+1,t,n,r)},n.prototype.drawImageData=function(e,t,n){var r,i,s,o,u,a,f;ctx.drawImage(n,0,0,e,t),o=ctx.getImageData(0,0,e,t),a=o.data,f=0,r=0,i=[[]],s=0,u=a.length;while(s<u)i[f][r]=[a[s],a[s+1],a[s+2]],r>=e(-1)?(r=0,f++,i[f]=[]):r++,s+=this.incriment;return this.data=i,this.draw()},n.prototype.createCanvas=function(t,n){return this.$el=e("<canvas>"),e("body").append(this.$el),this.$el.height(t),this.$el.width(n)},n.prototype.createImage=function(e,t){var n,r=this;return n=new Image,n.onload=function(){return r.drawImageData(e,t,n)},n.src=this.imgSrc},n.prototype.setupMouseEvents=function(){var t=this;return e("body").mousemove(function(e){var n;return n=t.data[e.pageY][e.pageX],t.drawPixelSquare(e.pageX,e.pageY,n,t.ctx)})},n.prototype.setDimensions=function(){},n}(),t.Pointilize=function(e){var t;return t=new r,t.initialize(e)}})(jQuery,window,document)}).call(this);